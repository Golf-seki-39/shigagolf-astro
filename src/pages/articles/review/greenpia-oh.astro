---
// --- [1] AstroとFirebaseの基本設定 ---
import BaseLayout from "../../../layouts/BaseLayout.astro";
import { db } from "../../../lib/firebase.js";
import { doc, getDoc } from "firebase/firestore";
import { Image } from "astro:assets";

// --- [2] 共通コンポーポーネントをインポート ---
import MySlider from '../../../components/MySlider.astro';
import ShareButtons from '../../../components/ShareButtons.astro';
import AuthorProfile from '../../../components/AuthorProfile.astro';

// --- [3] この記事固有の情報 ---
const title = "【正直レビュー】1球3円は本当！でも…私がグリーンピア近江八幡ゴルフにもう行かない理由 | シガゴル";
const description = "滋賀県近江八幡市の「グリーンピア近江八幡ゴルフ」を体験レビュー。SDカード等で1球3円になる安さは本物か？設備のリアルな状態、利用者のマナーまで、私が感じた光と影を正直にお伝えします。";
const category = "体験談";
const pubDate = "2025-10-17";
const pubDateISO = "2025-10-17T13:00:00+09:00"; // JST
const imageUrl = "https://i.imgur.com/KIm1JOr.jpeg"; // アイキャッチ画像を更新
const rangeId = "greenpia_oh"; 

// --- [4] シェアボタン用の変数を定義 (URLを修正) ---
const baseUrl = "https://shigolf.com";
const articleUrl = `${baseUrl}/articles/review/greenpia-oh/`; 
const headline = "【正直レビュー】1球3円は本当か？グリーンピア近江八幡の光と影";

// --- [5] Firebaseから練習場データを取得 ---
const appId = import.meta.env.PUBLIC_FIREBASE_APP_ID;
const docPath = `artifacts/${appId}/public/data/practice_ranges/${rangeId}`;
const docRef = doc(db, docPath);
const docSnap = await getDoc(docRef);
let rangeData = null;
if (docSnap.exists()) {
    rangeData = docSnap.data();
} else {
    console.error(`Error: No document found for rangeId: ${rangeId}`);
}

// === [★更新] 料金シミュレーター用のデータ定義 ===
const priceData = {
  plans: {
    visitor: { 
      name: 'ビジター', 
      type: 'visitor' 
    },
    sd_card: { 
      name: 'SDカード等割引', 
      type: 'sd_card', 
      discount: { weekday: 2, weekend: 1 } // ★平日/土日祝で割引額を変更
    },
    gold_member: {
      name: 'ゴールド会員',
      type: 'gold_member',
      entryFee: 0, // ★入場料無料
      discount: { weekday: 2, weekend: 1 }, // ★平日-2円, 土日祝-1円
      unlimited: [ // ★2時間と3時間のプラン
        { name: "2時間打ち放題", price: 1100 },
        { name: "3時間打ち放題", price: 1650 }
      ]
    },
    ladies_junior: {
      name: 'レディース・ジュニア',
      type: 'ladies_junior',
      unlimited: { name: "1時間打ち放題", price: 550 } // ★専用プラン
    }
  },
  timeZones: {
    early: { 
      name: "早朝 (6:00-10:00)", 
      entryFee: 0, 
      unlimited: null // 一般打ち放題なし
    },
    daytime: { 
      name: "日中 (10:00-17:00)", 
      entryFee: 300, 
      unlimited: { price: 1980, name: "3時間打ち放題" } // 一般
    },
    night: { 
      name: "夜間 (17:00-23:00)", 
      entryFee: 300, 
      unlimited: { price: 2200, name: "3時間打ち放題" } // 一般
    }
  },
  ballPrice: {
    weekday: {
      early: { floor1: 6, floor2: 6 },
      daytime: { floor1: 8, floor2: 5 },
      night: { floor1: 9, floor2: 5 },
    },
    weekend: {
      early: { floor1: 6, floor2: 6 },
      daytime: { floor1: 9, floor2: 7 },
      night: { floor1: 9, floor2: 7 },
    }
  }
};
// === [★更新ここまで] ===

// --- [6] 関連記事リストの定義 (experienceReportsを追加) ---
const experienceReports = [
    { url: '/articles/azuchi-review/', title: '安土ゴルフクラブ 体験レポート', img: 'https://i.imgur.com/cJBj7Sh.png' },
    { url: '/articles/sakura-gc-review/', title: 'さくらゴルフ倶楽部 体験レポート', img: 'https://i.imgur.com/DqJ7aMO.png' },
    { url: '/articles/garege-park-review/', title: 'がれーじぱーく東近江 体験レポート', img: 'https://i.imgur.com/TQmlJFb.jpeg' },
    { url: '/articles/review/greenpia-oh/', title: 'グリーンピア近江八幡ゴルフ 体験レポート', img: 'https://i.imgur.com/KIm1JOr.jpeg' },
];
const comparisonArticles = [
    { url: '/articles/comparison/omi-priceRank/', title: '【料金で徹底比較】近江八幡・東近江の安い練習場5選', img: 'https://i.imgur.com/DOzSbMV.jpeg' },
    { url: '/articles/omi-higashiomi-approach/', title: '【アプローチ＆バンカー練習場】近江八幡・東近江5選', img: 'https://i.imgur.com/jOTBh4U.jpeg' },
    { url: '/articles/comparison/omi-putting/', title: '【パター練習場が充実】近江八幡・東近江エリア4選', img: 'https://i.imgur.com/IJZwf4W.jpeg' },
    { url: '/articles/comparison/omi-higashiomi-comparison/', title: '【総合比較】近江八幡・東近江エリアのゴルフ練習場4選', img: 'https://i.imgur.com/DyVr8of.jpeg' },
];
---

<script slot="head" type="application/ld+json" set:html={JSON.stringify({
    "@context": "https://schema.org",
    "@type": "Article",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": articleUrl
    },
    "headline": headline,
    "description": description,
    "image": [ 
        imageUrl,
        "https://i.imgur.com/lL5bRC7.jpeg",
        "https://i.imgur.com/hZljYRY.jpeg",
        "https://i.imgur.com/eaMBXeP.jpeg",
        "https://i.imgur.com/y0hjcrU.jpeg",
        "https://i.imgur.com/HYj7q5q.jpeg"
    ],
    "author": {
        "@type": "Person",
        "name": "関（せき）",
        "url": "https://shigolf.com/about/",
        "image": "https://i.imgur.com/BOcMOf3.png",
        "sameAs": [ "https://x.com/Golf_Seki39", "https://golf-medley.com/articles/authors/seki", "https://note.com/seki_golf_39", "https://www.tiktok.com/@user2579514551181" ]
    },
    "publisher": {
        "@type": "Organization",
        "name": "シガゴル",
        "logo": { "@type": "ImageObject", "url": "https://i.imgur.com/mN0IbPS.png" }
    },
    "datePublished": pubDateISO,
    "dateModified": pubDateISO,
    "review": {
        "@type": "Review",
        "itemReviewed": {
            "@type": "LocalBusiness",
            "name": rangeData?.name,
            "image": rangeData?.imageUrl || imageUrl,
            "telephone": rangeData?.phone,
            "priceRange": rangeData?.priceRange || "500円〜2,000円",
            "address": {
              "@type": "PostalAddress",
              "streetAddress": rangeData?.address,
              "addressLocality": rangeData?.city || "近江八幡市",
              "addressRegion": "滋賀県",
              "postalCode": rangeData?.postalCode,
              "addressCountry": "JP"
            }
        },
        "reviewRating": {
            "@type": "Rating",
            "ratingValue": rangeData?.avgRating ? parseFloat(rangeData.avgRating).toFixed(1) : "0",
            "bestRating": "5",
            "worstRating": "1"
        },
        "author": { "@type": "Person", "name": "関（せき）" }
    }
})} />


<BaseLayout title={title} description={description} pubDate={pubDate} ogImage={imageUrl}>
    
    <div class="bg-white p-6 md:p-8 rounded-lg shadow-lg max-w-4xl mx-auto">
        <a href="/articles/" class="nav-link back-button mb-6 text-green-700 font-semibold hover:underline">
            ‹ お役立ち記事一覧に戻る
        </a>
        
        <article class="prose lg:prose-xl max-w-none text-slate-700 leading-relaxed">
            
            <header>
                <h1 class="text-3xl md:text-4xl font-bold text-slate-800">{headline}</h1>
                <p class="text-sm text-slate-500 mt-2">公開日：{pubDate}</p>
            </header>

            <p><strong>「1球3円で練習できる場所がある」</strong>――。<br>そんな噂を聞いて、誰もが「本当！？」と二度見してしまうゴルフ練習場が、滋賀県近江八幡市にあります。<br>それが「グリーンピア近江八幡ゴルフ」です。</p>
            
            <figure class="my-6">
                <Image src="https://i.imgur.com/lL5bRC7.jpeg" alt="グリーンピア近江八幡ゴルフの外観" class="w-full h-auto object-cover rounded-lg" width={1200} height={800} format="webp" quality={80} />
                <figcaption class="text-center text-sm text-slate-500 mt-2">夕暮れ時のグリーンピア近江八幡ゴルフ</figcaption>
            </figure>

            <p>正直に申し上げます。この記事は、「最高の練習場を見つけました！」と手放しでおすすめするキラキラしたレビューではありません。私が実際に何度も足を運び、その圧倒的な「光（＝安さ）」と、それと同じくらい無視できない「影（＝ストレス）」の両方を体験した、極めて個人的で正直なレポートです。</p>

            <div class="not-prose my-6 p-4 border-2 border-slate-300 rounded-lg bg-slate-50">
                <h3 class="text-xl font-bold text-center mt-0 mb-4">グリーンピア近江八幡 評価まとめ</h3>
                <div class="grid md:grid-cols-2 gap-4 text-sm">
                    <div class="border-t-4 border-green-500 bg-white p-3 rounded shadow">
                        <h4 class="font-bold text-green-700 mt-0 mb-2">✅ おすすめできる点</h4>
                        <ul class="list-disc list-inside m-0 p-0">
                            <li>SDカード等利用で<strong>1球3円</strong>という圧倒的安さ</li>
                            <li>女性・ジュニアは<strong>1時間550円〜</strong>で打ち放題可能</li>
                            <li>駐車場から打席までが近く、アクセスしやすい</li>
                        </ul>
                    </div>
                    <div class="border-t-4 border-red-500 bg-white p-3 rounded shadow">
                        <h4 class="font-bold text-red-700 mt-0 mb-2">❌ 正直な注意点</h4>
                        <ul class="list-disc list-inside m-0 p-0">
                            <li>波打った打席マットなど設備の老朽化が目立つ</li>
                            <li>アプローチ・バンカー練習場は期待できない</li>
                            <li>一部利用者のマナーが気になる場面も</li>
                        </ul>
                    </div>
                </div>
                <div class="mt-4 text-center bg-yellow-100 border border-yellow-300 p-3 rounded">
                    <p class="font-bold m-0">【結論】安さ最優先で練習量をこなしたい人向け。<br class="md:hidden" />練習環境の質を求める人には不向き。</p>
                </div>
            </div>

            <p>この記事を読めば、グリーンピア近江八幡ゴルフが、あなたにとって「天国」になるのか、それとも「地獄」になるのか（笑）。その判断材料がきっと見つかるはずです。</p>

            <div class="toc-container bg-slate-50 p-6 rounded-lg border border-slate-200 my-8 not-prose">
                <h2 class="text-xl font-bold mb-4 text-slate-800">この記事の目次</h2>
                <ul class="space-y-2 list-disc list-inside">
                    <li><a href="#section-1" class="text-green-700 hover:underline">グリーンピア近江八幡の料金：驚異の割引システム</a></li>
                    <li><a href="#simulator" class="text-green-700 hover:underline">かんたん料金シミュレーション</a></li> <li><a href="#section-2" class="text-green-700 hover:underline">練習環境のリアル｜私が感じた3つのストレス要因</a></li>
                    <li><a href="#section-3" class="text-green-700 hover:underline">結論：私がもう行かない理由と、おすすめできる人</a></li>
                    <li><a href="#info-summary" class="text-green-700 hover:underline">「グリーンピア近江八幡ゴルフ」の基本情報</a></li>
                </ul>
            </div>

            <h2 id="section-1" class="scroll-mt-24 text-2xl md:text-3xl font-bold text-slate-800 mt-12 mb-4">グリーンピア近江八幡の料金：驚異の割引システム</h2>
            <p>この練習場の最大の魅力、それはなんと言っても多彩で大胆すぎる割引システムです。</p>

            <h3 class="text-xl md:text-2xl font-bold text-slate-800 mt-8 mb-3">女性・ジュニアは必見！お得な打ち放題プラン</h3>
            <p>まず、女性とジュニア（18歳未満）には、入場料込みで1時間550円から利用できる、非常にお得な打ち放題プランが用意されています。練習量を確保したい方にとっては、これだけでも通う価値があるかもしれません。</p>
            
            <figure class="my-6">
                 <Image src="https://i.imgur.com/hZljYRY.jpeg" alt="レディース＆ジュニア 打ち放題料金表" class="w-full h-auto object-cover rounded-lg" width={1200} height={900} format="webp" quality={80} />
            </figure>


            <h3 class="text-xl md:text-2xl font-bold text-slate-800 mt-8 mb-3">「SDカード」で実現する驚異のボール単価</h3>
            <p>そして、この練習場の真骨頂が、特定のカード提示によるボール単価割引サービスです。対象はSDカード（セーフドライバーカード）保持者、消防団員、JAF会員など多岐にわたります。</p>
            
            <figure class="my-6">
                <Image src="https://i.imgur.com/eaMBXeP.jpeg" alt="割引対象の案内" class="w-full h-auto object-cover rounded-lg" width={900} height={1200} format="webp" quality={80} />
            </figure>

            <p>
                ご指摘の通り、**平日は2円引き、土日祝は1円引き**が正しい割引額です。
                例えば、平日10時以降の2階打席（1球5円）なら、2円引きで**1球3円**。
                土日祝10時以降の2階打席（1球7円）なら、1円引きで**1球6円**となります。
            </p>
            
            <div class="not-prose my-6 p-4 bg-blue-50 border-l-4 border-blue-400 rounded-r-lg">
                <p class="font-bold m-0">私が訪れた時はSDカードを忘れてしまい、通常料金（それでも1球5円！）で練習することに…。皆さんは、行く前に必ずお財布の中身を確認してくださいね！</p>
                <p class="text-sm m-0 mt-2">※打ち放題プランとボール単価割引の併用はできません。（シミュレーターでは自動で安い方を適用します）</p>
            </div>

            <h2 id="simulator" class="scroll-mt-24 text-2xl md:text-3xl font-bold text-slate-800 mt-12 mb-4">かんたん料金シミュレーション</h2>
            <div id="price-simulator" class="not-prose bg-slate-50 p-6 rounded-lg border-2 border-slate-200 my-8 overflow-hidden"> <h3 class="text-xl font-bold mb-6 text-slate-800 mt-0 flex justify-center items-center whitespace-nowrap">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block mr-2 -mt-1" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V4a2 2 0 00-2-2H6zm1 2a1 1 0 000 2h6a1 1 0 100-2H7zM6 7a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z" clip-rule="evenodd" /></svg>
                    かんたん料金シミュレーション
                </h3>
            
                <div class="md:space-y-4">
                    
                    <div id="step-1" class="step-container"> <label for="plan-select" class="font-semibold text-slate-700">① プランを選択</label>
                        <select id="plan-select" class="w-full mt-2 p-2 border border-slate-300 rounded-md bg-white text-base">
                            <option value="visitor">ビジター</option>
                            <option value="sd_card">SDカード等 割引適用</option>
                            <option value="gold_member">ゴールド会員</option>
                            <option value="ladies_junior">レディース・ジュニア</option>
                        </select>
                    </div>

                    <div class="hidden md:grid grid-cols-2 gap-4">
                        <div id="step-2-pc" class="step-container"> <label class="font-semibold text-slate-700">② 利用日</label>
                            <div class="flex gap-4 mt-2" id="day-options-pc">
                                <label class="flex items-center cursor-pointer"><input type="radio" name="day-pc" value="weekday" class="mr-2" checked> 平日</label>
                                <label class="flex items-center cursor-pointer"><input type="radio" name="day-pc" value="weekend" class="mr-2"> 土日祝</label>
                            </div>
                        </div>

                        <div id="step-3-pc" class="step-container"> <label class="font-semibold text-slate-700">③ 打席</label>
                            <div class="flex gap-4 mt-2" id="floor-options-pc">
                                <label class="flex items-center cursor-pointer"><input type="radio" name="floor-pc" value="floor1" class="mr-2"> 1階</label>
                                <label class="flex items-center cursor-pointer"><input type="radio" name="floor-pc" value="floor2" class="mr-2" checked> 2階</label>
                            </div>
                        </div>
                    </div>

                    <div id="step-2" class="step-container md:hidden"> <label class="font-semibold text-slate-700">② 利用日</label>
                        <div class="flex gap-4 mt-2" id="day-options">
                            <label class="flex items-center cursor-pointer"><input type="radio" name="day" value="weekday" class="mr-2"> 平日</label>
                            <label class="flex items-center cursor-pointer"><input type="radio" name="day" value="weekend" class="mr-2"> 土日祝</label>
                        </div>
                    </div>

                    <div id="step-3" class="step-container md:hidden"> <label class="font-semibold text-slate-700">③ 打席</label>
                        <div class="flex gap-4 mt-2" id="floor-options">
                            <label class="flex items-center cursor-pointer"><input type="radio" name="floor" value="floor1" class="mr-2"> 1階</label>
                            <label class="flex items-center cursor-pointer"><input type="radio" name="floor" value="floor2" class="mr-2"> 2階</label>
                        </div>
                    </div>

                    <div id="step-4" class="step-container"> <label class="font-semibold text-slate-700">④ 時間帯</label>
                        <div class="grid grid-cols-2 md:grid-cols-3 gap-2 mt-2" id="time-options">
                            <label class="flex items-center cursor-pointer p-2 border border-slate-300 rounded-md bg-white has-[:checked]:bg-green-50 has-[:checked]:border-green-400">
                                <input type="radio" name="time" value="early" class="mr-2"> 早朝<br class="hidden md:inline">(6-10時)
                            </label>
                            <label class="flex items-center cursor-pointer p-2 border border-slate-300 rounded-md bg-white has-[:checked]:bg-green-50 has-[:checked]:border-green-400">
                                <input type="radio" name="time" value="daytime" class="mr-2"> 日中<br class="hidden md:inline">(10-17時)
                            </label>
                            <label class="flex items-center cursor-pointer p-2 border border-slate-300 rounded-md bg-white has-[:checked]:bg-green-50 has-[:checked]:border-green-400">
                                <input type="radio" name="time" value="night" class="mr-2"> 夜間<br class="hidden md:inline">(17-23時)
                            </label>
                        </div>
                    </div>

                    <div id="step-5" class="step-container pt-2"> <div class="mb-4">
                            <label for="ball-count" class="font-semibold text-slate-700">⑤ 何球打ちますか？</label>
                            <input type="range" id="ball-count" min="50" max="800" step="10" value="150" class="w-full mt-3 h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer">
                            <div class="text-center font-bold text-green-700 text-lg mt-2" id="ball-count-display">150球</div>
                        </div>
                    </div>
                </div>

                <div class="text-center bg-white p-4 rounded-lg border-2 border-dashed border-slate-300 mt-6">
                    <p class="text-slate-600 mb-1 text-sm">合計金額（目安）</p>
                    <p class="text-3xl font-bold text-green-700" id="total-price-display">
                        ¥<span id="total-price">----</span>
                    </p>
                    <p class="text-sm font-bold text-blue-600 mt-2 hidden" id="unlimited-display"></p>
                </div>
                
                <div class="text-center mt-4">
                    <button id="reset-button" class="hidden bg-slate-200 text-slate-600 text-sm py-1 px-3 rounded-full">
                        やり直す
                    </button>
                </div>

                <p class="text-xs text-center text-slate-500 mt-4">
                    ※あくまでシミュレーションです。実際の金額は練習場でご確認ください。<br>
                    ※ゴールド会員プランは、別途年会費が必要です。
                </p>
            </div>
            <h2 id="section-2" class="scroll-mt-24 text-2xl md:text-3xl font-bold text-slate-800 mt-12 mb-4">練習環境のリアル｜私が感じた3つのストレス要因</h2>
            <p>さて、これだけの「光」があれば、当然「影」も気になりますよね。ここからは、私が実際に練習する中で感じた、正直な感想といくつかのストレス要因についてお話しします。</p>

            <h3 class="text-xl md:text-2xl font-bold text-slate-800 mt-8 mb-3">ストレス①：打席マットの「ワナ」と謎のティーアップマシン</h3>
            <p>まず打席ですが、設備はかなり年季が入っています。一部の打席マットは使い込まれて波打っており、平らなライでの練習が難しい場合があります。</p>

            <figure class="my-6">
                <Image src="https://i.imgur.com/y0hjcrU.jpeg" alt="波打っている打席マット" class="w-full h-auto object-cover rounded-lg" width={1200} height={900} format="webp" quality={80} />
                <figcaption class="text-center text-sm text-slate-500 mt-2">マットが波打っており、ボールが転がってしまうことも。</figcaption>
            </figure>

            <p>特にストレスだったのが、アイアン練習のためにボールを手前に置こうとすると、マットの勾配でボールがティーアップの穴に落ちていってしまうこと。これが頻発するとかなり集中力を削がれます。また、オートティーアップの高さ調整も、打席によって方式が異なり、最初は戸惑いました。</p>
            
            <h3 class="text-xl md:text-2xl font-bold text-slate-800 mt-8 mb-3">ストレス②：アプローチ＆バンカー練習場の「理想と現実」</h3>
            <p>アプローチとバンカーの練習場も併設されていますが（有料・フロント申込制）、アプローチ練習場は「軽く芝の上から打てる」という程度の広さです。さらに、アゴの高い本格的なバンカーは、私が訪問した際は数日前の雨の影響で完全に水没していました…。</p>

            <figure class="my-6">
                <Image src="https://i.imgur.com/HYj7q5q.jpeg" alt="水没したバンカー練習場" class="w-full h-auto object-cover rounded-lg" width={1200} height={900} format="webp" quality={80} />
                <figcaption class="text-center text-sm text-slate-500 mt-2">複数回訪れましたが、いつも利用不可の状態でした。</figcaption>
            </figure>

            <h3 class="text-xl md:text-2xl font-bold text-slate-800 mt-8 mb-3">ストレス③：「紳士のスポーツ」とは…？気になるマナー</h3>
            <p>これはその日たまたまだったのかもしれませんが、受付をせずに打席確保する方や、指定場所以外で喫煙する方など、残念ながらマナーが良いとは言えないお客さんを何度か見かけました。<br>「ゴルフって紳士のスポーツじゃなかったっけ…」そう思ってしまう場面があったのは、正直な感想です。</p>

            <h2 id="section-3" class="scroll-mt-24 text-2xl md:text-3xl font-bold text-slate-800 mt-12 mb-4">結論：私がもう行かない理由と、おすすめできる人</h2>
            <p>ここまで読んでくださった方なら、この練習場の「安さの正体」と「クセの強さ」について、かなり具体的にイメージができたのではないでしょうか。</p>
            <p>私自身の結論としては――<strong>「もう行かない」</strong>と決めました。理由はシンプルで、私にとって「落ち着いて集中できる環境」は、安さよりも大事なポイントだったからです。</p>

            <div class="not-prose my-8 grid md:grid-cols-2 gap-6">
                <div class="bg-green-50 border-2 border-green-200 rounded-lg p-4">
                    <h4 class="text-lg font-bold text-green-800 mt-0 text-center">🎯 こんな人におすすめ</h4>
                    <ul class="list-none p-0 m-0 space-y-2">
                        <li class="flex items-start"><span class="mr-2">✅</span>とにかくたくさん打ちたい初心者</li>
                        <li class="flex items-start"><span class="mr-2">✅</span>時間に余裕がありマイペースに通える方</li>
                        <li class="flex items-start"><span class="mr-2">✅</span>周囲の環境や設備が多少気にならない方</li>
                        <li class="flex items-start"><span class="mr-2">✅</span>SDカード等を活用できる地元民の方</li>
                    </ul>
                </div>
                <div class="bg-red-50 border-2 border-red-200 rounded-lg p-4">
                    <h4 class="text-lg font-bold text-red-800 mt-0 text-center">❌ おすすめしない人</h4>
                    <ul class="list-none p-0 m-0 space-y-2">
                        <li class="flex items-start"><span class="mr-2">🚫</span>練習の「質」にこだわりたい中～上級者</li>
                        <li class="flex items-start"><span class="mr-2">🚫</span>落ち着いた空間で集中して取り組みたい方</li>
                        <li class="flex items-start"><span class="mr-2">🚫</span>最新の設備や丁寧な接客を求める方</li>
                    </ul>
                </div>
            </div>

            
            <p class="mt-10 text-slate-600 italic">超格安で練習ができること、SDカード割引の存在を知れたこと、そして「自分にとって大事なのは何か」に気づけたこと。それだけでも、この練習場を訪れた価値はありました。この記事が、あなたの練習場選びの少しでもお役に立てば嬉しいです。</p>
            <br>       
            <br>

            <p>私のように「落ち着いた環境」や「質の高い練習」を望むゴルファーは、どの練習場を選めばよいのでしょうか？ご安心ください。その答えを見つけるために、私が近江八幡市・東近江市エリアの練習場を徹底的に比較した、こちらの記事をご用意しました。</p>

            <div class="not-prose my-12 space-y-12">
                <MySlider articles={comparisonArticles} title="あわせて読みたい「比較記事」"/>
                <MySlider articles={experienceReports} title="あわせて読みたい「体験談」"/>
            </div>

            <ShareButtons articleUrl={articleUrl} headline={headline} />
            <AuthorProfile />
            
            <h2 id="info-summary" class="scroll-mt-24 text-2xl md:text-3xl font-bold text-slate-800 mt-12 mb-4">
                {rangeData ? `「${rangeData.name}」の基本情報` : "基本情報"}
            </h2>
            {
                rangeData ? (
                    <div class="overflow-x-auto not-prose">
                        <table class="w-full text-left border-collapse">
                            <tbody>
                                <tr class="border-b border-slate-200">
                                    <th class="py-3 px-4 bg-slate-50 font-semibold w-1/3">練習場名</th>
                                    <td class="py-3 px-4">{rangeData.name}</td>
                                </tr>
                                {rangeData.avgRating && (
                                    <tr class="border-b border-slate-200">
                                        <th class="py-3 px-4 bg-slate-50 font-semibold">総合評価</th>
                                        <td class="py-3 px-4">
                                            <div class="flex items-center" role="img" aria-label={`評価 ${parseFloat(rangeData.avgRating).toFixed(1)}/5`}>
                                                <span class="font-bold text-amber-500 mr-2">{parseFloat(rangeData.avgRating).toFixed(1)}</span>
                                                {Array.from({ length: 5 }).map((_, i) => (
                                                    <svg class={`w-5 h-5 ${i < Math.round(parseFloat(rangeData.avgRating)) ? 'text-amber-400' : 'text-slate-300'}`} fill="currentColor" viewBox="0 0 20 20">
                                                        <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8-2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                                                    </svg>
                                                ))}
                                            </div>
                                        </td>
                                    </tr>
                                )}
                                <tr class="border-b border-slate-200">
                                    <th class="py-3 px-4 bg-slate-50 font-semibold">住所</th>
                                    <td class="py-3 px-4">
                                        <a href={`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(rangeData.name + " " + rangeData.address)}`} target="_blank" rel="noopener noreferrer" class="text-green-700 hover:underline">
                                            {rangeData.address}
                                        </a>
                                    </td>
                                </tr>
                                <tr class="border-b border-slate-200">
                                    <th class="py-3 px-4 bg-slate-50 font-semibold">電話番号</th>
                                    <td class="py-3 px-4">
                                        {rangeData.phone ? (
                                            <a href={`tel:${rangeData.phone?.replace(/-/g, "")}`} class="text-green-700 hover:underline">
                                                {rangeData.phone}
                                            </a>
                                        ) : (
                                            <span>-</span>
                                        )}
                                    </td>
                                </tr>
                                <tr class="border-b border-slate-200">
                                    <th class="py-3 px-4 bg-slate-50 font-semibold">営業時間</th>
                                    <td class="py-3 px-4" set:html={rangeData.business_hours?.replace(/\n/g, '<br />') || "-"} />
                                </tr>
                                <tr class="border-b border-slate-200">
                                    <th class="py-3 px-4 bg-slate-50 font-semibold">料金（代表例）</th>
                                    <td class="py-3 px-4">
                                        入場料: 300円 (早朝無料)<br/>
                                        ボール料: 5円/球〜<br/>
                                        打ち放題: 1,980円〜 (平日3時間)
                                    </td>
                                </tr>
                                <tr class="border-b border-slate-200">
                                    <th class="py-3 px-4 bg-slate-50 font-semibold">ヤード数</th>
                                    <td class="py-3 px-4">{rangeData.yardage ? `${rangeData.yardage}ヤード` : "-"}</td>
                                </tr>
                                <tr class="border-b border-slate-200">
                                    <th class="py-3 px-4 bg-slate-50 font-semibold">打席数</th>
                                    <td class="py-3 px-4">{rangeData.bays ? `${rangeData.bays}打席` : "-"}</td>
                                </tr>
                                <tr>
                                    <th class="py-3 px-4 bg-slate-50 font-semibold">アクセス</th>
                                    <td class="py-3 px-4">{rangeData.access}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                ) : (
                    <p class="text-center text-slate-500 py-4">
                        練習場の基本情報を読み込んでいます...
                    </p>
                )
            }
            {
                rangeData && (
                    <div class="map-container not-prose my-8 rounded-lg overflow-hidden border">
                        <iframe
                            src={`https://www.google.com/maps/embed/v1/place?key=${import.meta.env.PUBLIC_GOOGLE_MAPS_API_KEY}&q=${encodeURIComponent(rangeData.name + ", " + rangeData.address)}`}
                            width="100%" height="450" style="border:0;"
                            allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"
                        ></iframe>
                    </div>
                )
            }
        </article>
    </div>

    <style>
        .map-container { position: relative; width: 100%; overflow: hidden; height: 450px; }
        .map-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0; }
        .scroll-mt-24 { scroll-margin-top: 6rem; }
        /* ★スマホ用ステップ表示のためのCSS */
        @media (max-width: 767px) {
            .step-container {
                transition: opacity 0.3s ease-out, max-height 0.3s ease-out;
                overflow: hidden;
            }
            .step-container.hidden {
                opacity: 0;
                max-height: 0;
                padding-top: 0;
                padding-bottom: 0;
                margin-top: 0;
                margin-bottom: 0;
            }
        }
    </style>

    <script define:vars={{ priceData }}>
    document.addEventListener('DOMContentLoaded', () => {
        const simulator = document.getElementById('price-simulator');
        if (!simulator) return;

        // --- 要素の取得 ---
        const planSelect = simulator.querySelector('#plan-select');
        
        // スマホ用
        const dayRadios = simulator.querySelectorAll('input[name="day"]');
        const floorRadios = simulator.querySelectorAll('input[name="floor"]');
        // PC用 (スマホと同期させるため)
        const dayRadiosPc = simulator.querySelectorAll('input[name="day-pc"]');
        const floorRadiosPc = simulator.querySelectorAll('input[name="floor-pc"]');

        // 共通
        const timeRadios = simulator.querySelectorAll('input[name="time"]');
        const ballCountSlider = simulator.querySelector('#ball-count');
        const ballCountDisplay = simulator.querySelector('#ball-count-display');
        const totalPriceDisplay = simulator.querySelector('#total-price');
        const unlimitedDisplay = simulator.querySelector('#unlimited-display');
        const resetButton = simulator.querySelector('#reset-button');

        // ステップコンテナ
        const steps = [
            simulator.querySelector('#step-1'),
            simulator.querySelector('#step-2'), // スマホ用 利用日
            simulator.querySelector('#step-3'), // スマホ用 打席
            simulator.querySelector('#step-4'), // 共通 時間帯
            simulator.querySelector('#step-5')  // 共通 球数
        ];
        
        // PC用コンテナ (L/Jプランで無効化するため)
        const pcStep2 = simulator.querySelector('#step-2-pc');
        const pcStep3 = simulator.querySelector('#step-3-pc');

        // --- 状態管理 ---
        const isMobile = () => window.innerWidth < 768;

        // --- 関数定義 ---

        /**
         * L/Jプランが選択された際、他の入力を無効化する
         */
        function toggleInputs() {
            const isLJ = planSelect.value === 'ladies_junior';
            const inputsToToggle = [
                ...dayRadios, ...floorRadios, ...dayRadiosPc, ...floorRadiosPc, 
                ...timeRadios, ballCountSlider
            ];
            const containersToToggle = [
                steps[1], steps[2], steps[3], steps[4], // スマホ用ステップ
                pcStep2, pcStep3 // PC用ステップ
            ];

            if (isLJ) {
                // L/Jプランが選択された
                inputsToToggle.forEach(input => input.disabled = true);
                containersToToggle.forEach(container => {
                    container?.classList.add('opacity-50', 'pointer-events-none');
                });
                // スマホ表示でもステップを進めない
                if (isMobile()) {
                    steps.forEach((step, index) => {
                        if (index > 0) step.classList.add('hidden'); // ステップ1以外を隠す
                    });
                }
                calculatePrice(); // 専用プランの表示を強制実行
            } else {
                // 他プランが選択された
                inputsToToggle.forEach(input => input.disabled = false);
                containersToToggle.forEach(container => {
                    container?.classList.remove('opacity-50', 'pointer-events-none');
                });
                 // スマホ表示の場合、非表示ステップを再計算
                if (isMobile()) {
                    initializeView();
                }
            }
        }

        /**
         * 料金を計算して表示する
         */
        function calculatePrice() {
            // 1. 各選択肢の値を取得
            const planKey = planSelect.value;
            const dayKey = (isMobile() ? 
                            simulator.querySelector('input[name="day"]:checked') : 
                            simulator.querySelector('input[name="day-pc"]:checked'))?.value;
            const floorKey = (isMobile() ? 
                              simulator.querySelector('input[name="floor"]:checked') : 
                              simulator.querySelector('input[name="floor-pc"]:checked'))?.value;
            const timeKey = simulator.querySelector('input[name="time"]:checked')?.value;
            const balls = parseInt(ballCountSlider.value);

            ballCountDisplay.textContent = `${balls}球`;
            
            // ★ L/Jプランが選択されたら、専用表示をして計算終了
            if (planKey === 'ladies_junior') {
                const ljPlan = priceData.plans.ladies_junior.unlimited;
                totalPriceDisplay.textContent = ljPlan.price.toLocaleString();
                unlimitedDisplay.textContent = `💡 ${ljPlan.name} (¥${ljPlan.price.toLocaleString()}) が適用されます`;
                unlimitedDisplay.classList.remove('hidden');
                return;
            }

            // --- L/Jプラン以外の計算 ---
            if (!planKey || !dayKey || !timeKey || !floorKey) {
                totalPriceDisplay.textContent = '----';
                unlimitedDisplay.classList.add('hidden');
                return;
            }

            // 2. 必要な料金データを取得
            const plan = priceData.plans[planKey];
            const timeZone = priceData.timeZones[timeKey];
            const baseBallPrice = priceData.ballPrice[dayKey][timeKey][floorKey];

            let entryFee = timeZone.entryFee;
            let ballPriceDiscount = 0;
            let ballTotal = 0;
            let finalPrice = 0;
            let unlimitedMessage = "";

            // 3. プラン別に基本料金を計算
            if (plan.type === 'gold_member') {
                entryFee = plan.entryFee; // 0円
                ballPriceDiscount = plan.discount[dayKey]; // 平日-2, 土日祝-1
            } else if (plan.type === 'sd_card') {
                ballPriceDiscount = plan.discount[dayKey]; // 平日-2, 土日祝-1
            }

            const actualBallPrice = Math.max(0, baseBallPrice - ballPriceDiscount);
            ballTotal = (actualBallPrice * balls) + entryFee;
            finalPrice = ballTotal; // まず単価計算を最終価格とする

            // 4. 打ち放題プランとの比較
            unlimitedDisplay.classList.add('hidden'); // いったんメッセージを隠す

            if (plan.type === 'gold_member' && timeZone.unlimited) {
                // ★ ゴールド会員の場合 (早朝以外)
                const memberPlans = plan.unlimited.slice().sort((a, b) => a.price - b.price); // [1100, 1650]
                
                let bestPlanPrice = ballTotal;
                let bestPlanMessage = "";

                if (ballTotal > memberPlans[0].price) { // 1100円プランと比較
                    bestPlanPrice = memberPlans[0].price;
                    bestPlanMessage = `💡 ${memberPlans[0].name} (¥${memberPlans[0].price.toLocaleString()}) がお得です`;
                }
                if (bestPlanPrice > memberPlans[1].price) { // 1650円プランと比較
                    bestPlanPrice = memberPlans[1].price;
                    bestPlanMessage = `💡 ${memberPlans[1].name} (¥${memberPlans[1].price.toLocaleString()}) がお得です`;
                }

                finalPrice = bestPlanPrice;
                unlimitedMessage = bestPlanMessage;

            } else if ((plan.type === 'visitor' || plan.type === 'sd_card') && timeZone.unlimited) {
                // ★ ビジター / SDカード の場合 (早朝以外)
                const generalPlan = timeZone.unlimited; // { name: "3時間...", price: 1980 or 2200 }
                if (ballTotal > generalPlan.price) {
                    finalPrice = generalPlan.price;
                    unlimitedMessage = `💡 ${generalPlan.name} (¥${generalPlan.price.toLocaleString()}) がお得です`;
                }
            }

            // 5. 最終金額とメッセージを表示
            totalPriceDisplay.textContent = finalPrice.toLocaleString();
            if (unlimitedMessage) {
                unlimitedDisplay.textContent = unlimitedMessage;
                unlimitedDisplay.classList.remove('hidden');
            }
        }

        /**
         * スマホ表示でステップを進める
         */
        function goToStep(stepToShow) {
            if (!isMobile() || planSelect.value === 'ladies_junior') return;
            
            steps.forEach(step => step.classList.add('hidden'));
            stepToShow.classList.remove('hidden');
            resetButton.classList.remove('hidden');
        }

        /**
         * スマホ表示でシミュレーターをリセットする
         */
        function resetSimulator() {
            // ラジオボタンの選択を全て解除
            [...dayRadios, ...floorRadios, ...timeRadios, ...dayRadiosPc, ...floorRadiosPc].forEach(radio => radio.checked = false);
            // デフォルト選択 (PC/スマホ両方)
            simulator.querySelector('input[name="day"][value="weekday"]').checked = true;
            simulator.querySelector('input[name="day-pc"][value="weekday"]').checked = true;
            simulator.querySelector('input[name="floor"][value="floor2"]').checked = true;
            simulator.querySelector('input[name="floor-pc"][value="floor2"]').checked = true;
            simulator.querySelector('input[name="time"][value="daytime"]').checked = true;

            planSelect.value = 'visitor';
            ballCountSlider.value = 150;
            
            toggleInputs(); // L/Jプランの無効化を解除
            
            if (isMobile()) {
                steps.forEach((step, index) => {
                    if (index === 0) step.classList.remove('hidden'); // ステップ1
                    else step.classList.add('hidden');
                });
                resetButton.classList.add('hidden');
            }
            
            calculatePrice();
        }

        /**
         * スマホ/PC表示を初期化
         */
        function initializeView() {
            if (isMobile()) {
                // スマホ表示
                pcStep2.classList.add('hidden');
                pcStep3.classList.add('hidden');
                
                // 現在選択されているステップのみ表示
                const dayChecked = simulator.querySelector('input[name="day"]:checked');
                const floorChecked = simulator.querySelector('input[name="floor"]:checked');
                const timeChecked = simulator.querySelector('input[name="time"]:checked');

                if (!dayChecked) goToStep(steps[1]);
                else if (!floorChecked) goToStep(steps[2]);
                else if (!timeChecked) goToStep(steps[3]);
                else goToStep(steps[4]); // 球数

                // L/Jプランでなければリセットボタン表示
                if (planSelect.value !== 'ladies_junior' && (dayChecked || floorChecked || timeChecked)) {
                     resetButton.classList.remove('hidden');
                } else if (planSelect.value === 'ladies_junior') {
                    goToStep(steps[0]); // L/Jならステップ1に強制
                    resetButton.classList.remove('hidden'); // L/Jでもリセットは表示
                } else {
                    goToStep(steps[0]); // 初期状態
                    resetButton.classList.add('hidden');
                }

            } else {
                // PC表示
                steps.forEach(step => step.classList.remove('hidden')); // 全ステップ表示
                steps[1].classList.add('hidden'); // スマホ用(day)は隠す
                steps[2].classList.add('hidden'); // スマホ用(floor)は隠す
                pcStep2.classList.remove('hidden');
            	pcStep3.classList.remove('hidden');
                resetButton.classList.add('hidden'); 
            }
            toggleInputs(); // L/Jプランの無効化状態を再適用
            calculatePrice();
        }
        
        /**
         * イベントリスナーを設定
         */
        function setupListeners() {
            planSelect.addEventListener('change', () => {
                toggleInputs(); // ★ L/Jプランの無効化処理
                if (planSelect.value !== 'ladies_junior' && isMobile()) {
                    goToStep(steps[1]); // L/J以外ならステップ2へ
                }
                calculatePrice();
            });
            
            // スマホ用ラジオ
            dayRadios.forEach(radio => radio.addEventListener('change', () => {
                simulator.querySelector(`input[name="day-pc"][value="${radio.value}"]`).checked = true; // PCと同期
                goToStep(steps[2]); // ステップ3へ
                calculatePrice();
            }));
            floorRadios.forEach(radio => radio.addEventListener('change', () => {
                 simulator.querySelector(`input[name="floor-pc"][value="${radio.value}"]`).checked = true; // PCと同期
                goToStep(steps[3]); // ステップ4へ
                calculatePrice();
            }));

            // PC用ラジオ
             dayRadiosPc.forEach(radio => radio.addEventListener('change', () => {
                simulator.querySelector(`input[name="day"][value="${radio.value}"]`).checked = true; // スマホと同期
                calculatePrice();
            }));
            floorRadiosPc.forEach(radio => radio.addEventListener('change', () => {
                simulator.querySelector(`input[name="floor"][value="${radio.value}"]`).checked = true; // スマホと同期
                calculatePrice();
            }));

            // 共通
            timeRadios.forEach(radio => radio.addEventListener('change', () => {
                goToStep(steps[4]); // ステップ5へ
                calculatePrice();
            }));
            ballCountSlider.addEventListener('input', calculatePrice);
            resetButton.addEventListener('click', resetSimulator);
        }

        // --- 初期化実行 ---
        resetSimulator(); // ラジオボタンのデフォルト選択を確実に実行
        initializeView(); // PC/スマホ表示を初期化
        setupListeners(); // イベントリスナーを設定

        let resizeTimer;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimer);
            resizeTimer = setTimeout(() => {
                resetSimulator();
                initializeView();
            }, 250);
        });
    });
</script>
</BaseLayout>